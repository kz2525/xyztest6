/*! gumshoejs v5.1.1 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */
;Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(a){var b=this;if(!document.documentElement.contains(this)){return null}do{if(b.matches(a)){return b}b=b.parentElement}while(null!==b);return null}),(function(){if("function"==typeof window.CustomEvent){return !1}function a(b,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");return d.initCustomEvent(b,c.bubbles,c.cancelable,c.detail),d}a.prototype=window.Event.prototype,window.CustomEvent=a})(),(function(a,b){"function"==typeof define&&define.amd?define([],(function(){return b(a)})):"object"==typeof exports?module.exports=b(a):a.Gumshoe=b(a)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(q){var j={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},f=function(a,c,l){if(l.settings.events){var i=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:l});c.dispatchEvent(i)}},d=function(a){var c=0;if(a.offsetParent){for(;a;){c+=a.offsetTop,a=a.offsetParent}}return c>=0?c:0},v=function(a){a&&a.sort((function(c,i){return d(c.content)<d(i.content)?-1:1}))},k=function(i,t,l){var a=i.getBoundingClientRect(),r=(function(c){return"function"==typeof c.offset?parseFloat(c.offset()):parseFloat(c.offset)})(t);return l?parseInt(a.bottom,10)<(q.innerHeight||document.documentElement.clientHeight):parseInt(a.top,10)<=r},b=function(){return q.innerHeight+q.pageYOffset>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},h=function(a,c){var l=a[a.length-1];if(function(n,o){return !(!b()||!k(n.content,o,!0))}(l,c)){return l}for(var i=a.length-1;i>=0;i--){if(k(a[i].content,c)){return a[i]}}},g=function(a,c){if(c.nested){var i=a.parentNode.closest("li");i&&(i.classList.remove(c.nestedClass),g(i,c))}},m=function(a,c){if(a){var i=a.nav.closest("li");i&&(i.classList.remove(c.navClass),a.content.classList.remove(c.contentClass),g(i,c),f("gumshoeDeactivate",i,{link:a.nav,content:a.content,settings:c}))}},p=function(a,c){if(c.nested){var i=a.parentNode.closest("li");i&&(i.classList.add(c.nestedClass),p(i,c))}};return function(i,x){var a,s,u,w,n,y={};y.setup=function(){a=document.querySelectorAll(i),s=[],Array.prototype.forEach.call(a,(function(c){var l=document.getElementById(decodeURIComponent(c.hash.substr(1)));l&&s.push({nav:c,content:l})})),v(s)},y.detect=function(){var c=h(s,n);c?u&&c.content===u.content||(m(u,n),(function(l,r){if(l){var z=l.nav.closest("li");z&&(z.classList.add(r.navClass),l.content.classList.add(r.contentClass),p(z,r),f("gumshoeActivate",z,{link:l.nav,content:l.content,settings:r}))}})(c,n),u=c):u&&(m(u,n),u=null)};var e=function(c){w&&q.cancelAnimationFrame(w),w=q.requestAnimationFrame(y.detect)},t=function(c){w&&q.cancelAnimationFrame(w),w=q.requestAnimationFrame((function(){v(s),y.detect()}))};y.destroy=function(){u&&m(u,n),q.removeEventListener("scroll",e,!1),n.reflow&&q.removeEventListener("resize",t,!1),s=null,a=null,u=null,w=null,n=null};return n=(function(){var c={};return Array.prototype.forEach.call(arguments,(function(l){for(var o in l){if(!l.hasOwnProperty(o)){return}c[o]=l[o]}})),c})(j,x||{}),y.setup(),y.detect(),q.addEventListener("scroll",e,!1),n.reflow&&q.addEventListener("resize",t,!1),y}}));